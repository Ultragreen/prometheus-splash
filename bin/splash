#!/usr/bin/env ruby 
# coding: utf-8

require 'splash/dependencies'
require 'splash/cli'

#inhibit warning : due to prometheus-client call to URI.encode warning
$-w = nil

include Splash::Dependencies
include Splash::Helpers
include Splash::Exiter
include Splash::Loggers
include Splash::Config

unless verify_file(name: CONFIG_FILE, mode: "644", owner: user_root, group: group_root).empty? then
  puts 'ERROR: Splash need reconfiguration : execution abort, '
  puts ' => Restart after rebuild (recheck for homemade templates) :'

  acase = run_as_root :setupsplash
  splash_exit acase
end

CLI.start(ARGV)
